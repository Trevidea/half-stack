<div class="connection-grid">
  <div class="card-body" style="padding: 0.5rem">
    <div class="row">
      <div
        *ngFor="let item of eventConnection"
        class="col-xxxl-3 col-xxl-4 col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-3"
      >
        <div class="d-flex">
          <div
            class="card cursor-pointer"
            style="height: 14rem; width: 24rem"
            [routerLink]="'/connection/connection-device-detail/{{item.id}}'"
          >
            <img
              *ngIf="item.transmitStatus === 'Streaming'"
              src="assets/images/pip-image/1.jpg"
              alt=""
              style="height: 100%; width: 100%; border-radius: 0.428rem"
            />
            <div
              *ngIf="item.transmitStatus !== 'Streaming'"
              style="
                align-items: center;
                height: 100%;
                width: 100%;
                background-color: rgba(248, 248, 248, 1);
                display: flex;
                text-align: center;
                justify-content: center;
              "
            >
              <div #tab *ngIf="item.deviceType == 'iPad'">
                <svg
                  width="100"
                  height="100"
                  viewBox="0 0 69 69"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_3595_7425)">
                    <path
                      d="M53.1074 0.791992H13.4408C9.53076 0.791992 6.35742 3.96533 6.35742 7.87533V61.7087C6.35742 65.6187 9.53076 68.792 13.4408 68.792H53.1074C57.0174 68.792 60.1908 65.6187 60.1908 61.7087V7.87533C60.1908 3.96533 57.0174 0.791992 53.1074 0.791992ZM33.2741 65.9587C30.9224 65.9587 29.0241 64.0603 29.0241 61.7087C29.0241 59.357 30.9224 57.4587 33.2741 57.4587C35.6258 57.4587 37.5241 59.357 37.5241 61.7087C37.5241 64.0603 35.6258 65.9587 33.2741 65.9587ZM54.5241 54.6253H12.0241V9.29199H54.5241V54.6253Z"
                      fill="#216093"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_3595_7425">
                      <rect
                        width="68"
                        height="68"
                        fill="white"
                        transform="translate(0.691406 0.791992)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </div>
              <div #phone *ngIf="item.deviceType == 'iPhone'">
                <svg
                  width="100"
                  height="100"
                  viewBox="0 0 69 69"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_3595_7458)">
                    <path
                      d="M44.6074 2.8728H21.9408C18.0308 2.8728 14.8574 6.04614 14.8574 9.95614V58.1228C14.8574 62.0328 18.0308 65.2061 21.9408 65.2061H44.6074C48.5174 65.2061 51.6908 62.0328 51.6908 58.1228V9.95614C51.6908 6.04614 48.5174 2.8728 44.6074 2.8728ZM33.2741 62.3728C30.9224 62.3728 29.0241 60.4745 29.0241 58.1228C29.0241 55.7711 30.9224 53.8728 33.2741 53.8728C35.6258 53.8728 37.5241 55.7711 37.5241 58.1228C37.5241 60.4745 35.6258 62.3728 33.2741 62.3728ZM46.0241 51.0395H20.5241V11.3728H46.0241V51.0395Z"
                      fill="#216093"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_3595_7458">
                      <rect
                        width="68"
                        height="68"
                        fill="white"
                        transform="translate(0.691406 0.0395508)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </div>
            </div>
            <div style="position: absolute; bottom: 0.3em; left: 0.3em">
              <div
                *ngIf="item.quality == 'Good'"
                class="badge badge-pill badge-light-success"
                style="
                  background-color: #eaf7ee;
                  color: rgba(73, 69, 79, 1) !important;
                "
              >
                <span style="color: rgb(0, 102, 46)"> &#x25CF; </span>
                Good
              </div>
              <div
                *ngIf="item.quality == 'Poor'"
                class="badge badge-pill"
                style="background-color: #ffdede; color: rgba(73, 69, 79, 1)"
              >
                <span style="color: rgb(181, 0, 0)"> &#x25CF; </span>
                Poor
              </div>
            </div>
            <div
              class="d-flex"
              style="position: absolute; bottom: 0.3em; right: 0.3em"
            >
              <span>
                <div
                  *ngIf="item.transmitStatus === 'Streaming'"
                  class="badge badge-pill"
                  style="background-color: rgba(255, 252, 243, 1)"
                >
                  <i class="bi bi-arrow-up-right text-warning"></i>
                  <span style="margin-left: 0.1em; color: black">
                    {{ item.transmitStatus }}
                  </span>
                </div>

                <i></i>
                <div
                  *ngIf="item.transmitStatus === 'Receiving'"
                  class="badge badge-pill"
                  style="background-color: rgba(233, 240, 245, 1)"
                >
                  <i class="bi bi-arrow-down-left text-primary"></i>
                  <span style="margin-left: 0.1em; color: black">
                    {{ item.transmitStatus }}
                  </span>
                </div>
                <div
                  *ngIf="item.transmitStatus === 'Paused'"
                  class="badge badge-pill"
                  style="background-color: rgb(238 220 213)"
                >
                  <i class="bi bi-pause" style="color: #0d0d0d"></i>
                  <span style="margin-left: 0.1em; color: black">
                    {{ item.transmitStatus }}
                  </span>
                </div>
                <div
                  *ngIf="item.transmitStatus === 'Blocked'"
                  class="badge badge-pill"
                  style="background-color: rgb(213 169 153)"
                >
                  <i class="bi bi-slash-circle text-danger"></i>
                  <span style="margin-left: 0.1 em; color: black">
                    {{ item.transmitStatus }}
                  </span>
                </div>
              </span>
            </div>
          </div>
          <div
            class="card p-1"
            style="
              height: 10rem;
              width: 14rem;

              margin-top: 2rem;
              margin-left: -2rem !important;
            "
            [ngClass]="{
              'info-card-warning': item.transmitStatus === 'Streaming',
              'info-card-primary': item.transmitStatus !== 'Streaming'
            }"
          >
            <div class="d-flex">
              <div class="d-flex mr-auto">
                <span>
                  <i
                    *ngIf="item.transmitStatus === 'Streaming'"
                    class="bi bi-camera-video text-warning"
                    style="margin-right: 0.2rem"
                  ></i>
                  <i
                    *ngIf="item.transmitStatus !== 'Streaming'"
                    class="bi bi bi-tablet text-primary"
                    style="margin-right: 0.2rem; margin-bottom: 0.2em"
                  ></i>
                </span>
                <h6 style="text-wrap: nowrap; overflow: hidden">
                  {{ item.deviceType }}
                </h6>
              </div>
              <span
                [mcDropdownTriggerFor]="appDropdownWithNested"
                style="position: absolute; top: 0.5em; right: 0.3em"
              >
                <i class="bi bi-three-dots-vertical cursor-pointer"></i>
              </span>
              <mc-dropdown #appDropdownWithNested="mcDropdown">
                <button mc-dropdown-item *ngIf="item.role == 'Publisher'">
                  <i data-feather="eye" class="mr-50 mb-25"></i> View Stream
                </button>
                <button mc-dropdown-item>
                  <i
                    *ngIf="item.transmitStatus !== 'Paused'"
                    data-feather="pause"
                    class="mr-50 mb-25"
                  ></i>
                  <i
                    *ngIf="item.transmitStatus == 'Paused'"
                    data-feather="play"
                    class="mr-50 mb-25"
                  ></i>
                  {{
                    item.transmitStatus == "Paused"
                      ? "Resume Connection"
                      : "Pause"
                  }}
                </button>
                <button mc-dropdown-item (click)="modalOpenSM(modalblock)">
                  <i data-feather="slash" class="mr-50 mb-25"></i> Block
                  <ng-template #modalblock let-modal>
                    <app-connection-alert
                      [title]="'Block User'"
                      [description]="
                        'Are you sure you want to block user  Are you sure you want to block user' +
                        item.user +
                        '?'
                      "
                    ></app-connection-alert>
                  </ng-template>
                </button>

                <button
                  *ngIf="item.role == 'Publisher'"
                  mc-dropdown-item
                  [mcDropdownTriggerFor]="appDropdownNested"
                >
                  <i data-feather="loader" class="mr-50 mb-25"></i> Streaming
                </button>
                <button mc-dropdown-item (click)="delete()">
                  <i data-feather="trash-2" class="mr-50 mb-25"></i> Delete
                </button>
              </mc-dropdown>

              <mc-dropdown #appDropdownNested="mcDropdown">
                <button mc-dropdown-item>
                  <i data-feather="youtube" class="mr-50 mb-25"></i>YouTube
                </button>
                <button mc-dropdown-item>
                  <i data-feather="facebook" class="mr-50 mb-25"></i>Facebook
                </button>
                <button mc-dropdown-item>
                  <i data-feather="twitch" class="mr-50 mb-25"></i> Twitch
                </button>
              </mc-dropdown>
              <!-- <span
                ngbDropdown
                style="cursor: pointer"
                style="position: absolute; top: 0.5em; right: 0.3em"
              >
                <i
                  class="bi bi-three-dots-vertical"
                  ngbDropdownToggle
                  id="dropdownMenuButton"
                ></i>
                <div ngbDropdownMenu>
                  <a ngbDropdownItem>Pause</a>
                  <a ngbDropdownItem>Pause</a>
                  <a ngbDropdownItem>Disable</a>
                  <a ngbDropdownItem>Remove</a>
                </div>
              </span> -->
            </div>
            <h6>{{ item.user }}</h6>
            <h6>{{ item.deviceType }}</h6>
            <h6>{{ item.ipAddress }}</h6>
            <h6>{{ item.retries }} retries</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
